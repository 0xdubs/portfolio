{"version":3,"sources":["../../src/use-menu.ts"],"names":["useClickable","createDescendantContext","useControllableState","useDisclosure","useFocusOnHide","useId","useIds","useOutsideClick","useShortcut","useUnmountEffect","useUpdateEffect","usePopper","createContext","getValidChildren","mergeRefs","addItem","callAllHandlers","dataAttr","determineLazyBehavior","focus","getNextItemFromSearch","getOwnerDocument","isActiveElement","isArray","isString","normalizeEventKey","removeItem","React","MenuDescendantsProvider","useMenuDescendantsContext","useMenuDescendants","useMenuDescendant","MenuProvider","useMenuContext","strict","name","useMenu","props","id","closeOnSelect","closeOnBlur","autoSelect","isLazy","isOpen","isOpenProp","defaultIsOpen","onClose","onCloseProp","onOpen","onOpenProp","placement","lazyBehavior","popperProps","onToggle","menuRef","useRef","buttonRef","ref","handler","event","current","contains","target","popper","enabled","focusedIndex","setFocusedIndex","useState","descendants","focusRef","visible","shouldFocus","buttonId","menuId","openAndFocusMenu","useCallback","nextTick","selectTextIfInput","timeoutIds","Set","forEach","clearTimeout","clear","openAndFocusFirstItem","setTimeout","first","firstEnabled","index","add","openAndFocusLastItem","last","lastEnabled","refocus","doc","hasFocusWithin","activeElement","shouldRefocus","node","item","onTransitionEnd","forceUpdate","orientation","useMenuButton","externalRef","menu","onClick","action","onKeyDown","eventKey","keyMap","Enter","ArrowDown","ArrowUp","preventDefault","stopPropagation","referenceRef","isTargetMenuItem","getAttribute","startsWith","useMenuList","Error","createTypeaheadHandler","key","Tab","Escape","next","nextEnabled","prev","prevEnabled","fn","onTypeahead","character","nextItem","values","textContent","indexOf","hasBeenOpened","shouldRenderChildren","hasBeenSelected","isSelected","children","tabIndex","role","style","transformOrigin","useMenuPositioner","getPopperProps","visibility","useMenuItem","onMouseEnter","onMouseEnterProp","onMouseMove","onMouseMoveProp","onMouseLeave","onMouseLeaveProp","onClickProp","isDisabled","isFocusable","htmlProps","menuCloseOnSelect","register","disabled","isFocused","trulyDisabled","clickableProps","useMenuOption","type","isChecked","rest","ownProps","useMenuOptionGroup","value","valueProp","defaultValue","onChange","onChangeProp","isRadio","fallback","setValue","selectedValue","nextValue","includes","validChildren","clones","map","child","cloneElement","useMenuState"],"mappings":"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","sourcesContent":["import { useClickable } from \"@chakra-ui/clickable\"\nimport { createDescendantContext } from \"@chakra-ui/descendant\"\nimport {\n  useControllableState,\n  useDisclosure,\n  UseDisclosureProps,\n  useFocusOnHide,\n  useId,\n  useIds,\n  useOutsideClick,\n  useShortcut,\n  useUnmountEffect,\n  useUpdateEffect,\n} from \"@chakra-ui/hooks\"\nimport { usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport {\n  createContext,\n  EventKeyMap,\n  getValidChildren,\n  mergeRefs,\n} from \"@chakra-ui/react-utils\"\nimport {\n  addItem,\n  callAllHandlers,\n  dataAttr,\n  determineLazyBehavior,\n  focus,\n  getNextItemFromSearch,\n  getOwnerDocument,\n  isActiveElement,\n  isArray,\n  isString,\n  LazyBehavior,\n  normalizeEventKey,\n  removeItem,\n} from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\n/* -------------------------------------------------------------------------------------------------\n * Create context to track descendants and their indices\n * -----------------------------------------------------------------------------------------------*/\n\nexport const [\n  MenuDescendantsProvider,\n  useMenuDescendantsContext,\n  useMenuDescendants,\n  useMenuDescendant,\n] = createDescendantContext<HTMLElement>()\n\n/* -------------------------------------------------------------------------------------------------\n * Create context to track menu state and logic\n * -----------------------------------------------------------------------------------------------*/\n\nexport const [MenuProvider, useMenuContext] = createContext<\n  Omit<UseMenuReturn, \"descendants\">\n>({\n  strict: false,\n  name: \"MenuContext\",\n})\n\n/* -------------------------------------------------------------------------------------------------\n * useMenu hook\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuProps extends UsePopperProps, UseDisclosureProps {\n  /**\n   * If `true`, the menu will close when a menu item is\n   * clicked\n   *\n   * @default true\n   */\n  closeOnSelect?: boolean\n  /**\n   * If `true`, the menu will close when you click outside\n   * the menu list\n   *\n   * @default true\n   */\n  closeOnBlur?: boolean\n  /**\n   * If `true`, the first enabled menu item will receive focus and be selected\n   * when the menu opens.\n   *\n   * @default true\n   */\n  autoSelect?: boolean\n  /**\n   * Performance ðŸš€:\n   * If `true`, the MenuItem rendering will be deferred\n   * until the menu is open.\n   */\n  isLazy?: boolean\n  /**\n   * Performance ðŸš€:\n   * The lazy behavior of menu's content when not visible.\n   * Only works when `isLazy={true}`\n   *\n   * - \"unmount\": The menu's content is always unmounted when not open.\n   * - \"keepMounted\": The menu's content initially unmounted,\n   * but stays mounted when menu is open.\n   *\n   * @default \"unmount\"\n   */\n  lazyBehavior?: LazyBehavior\n}\n\n/**\n * React Hook to manage a menu\n *\n * It provides the logic and will be used with react context\n * to propagate its return value to all children\n */\nexport function useMenu(props: UseMenuProps = {}) {\n  const {\n    id,\n    closeOnSelect = true,\n    closeOnBlur = true,\n    autoSelect = true,\n    isLazy,\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    onClose: onCloseProp,\n    onOpen: onOpenProp,\n    placement = \"bottom-start\",\n    lazyBehavior = \"unmount\",\n    ...popperProps\n  } = props\n\n  const { isOpen, onOpen, onClose, onToggle } = useDisclosure({\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    onClose: onCloseProp,\n    onOpen: onOpenProp,\n  })\n\n  /**\n   * Prepare the reference to the menu and disclosure\n   */\n  const menuRef = React.useRef<HTMLDivElement>(null)\n  const buttonRef = React.useRef<HTMLButtonElement>(null)\n\n  useOutsideClick({\n    ref: menuRef,\n    handler: (event) => {\n      if (\n        isOpen &&\n        closeOnBlur &&\n        !buttonRef.current?.contains(event.target as HTMLElement)\n      ) {\n        onClose()\n      }\n    },\n  })\n\n  /**\n   * Add some popper.js for dynamic positioning\n   */\n  const popper = usePopper({\n    ...popperProps,\n    enabled: isOpen,\n    placement,\n  })\n\n  const [focusedIndex, setFocusedIndex] = React.useState(-1)\n\n  /**\n   * Context to register all menu item nodes\n   */\n  const descendants = useMenuDescendants()\n\n  /**\n   * Focus the button when we close the menu\n   */\n  useUpdateEffect(() => {\n    if (!isOpen) {\n      setFocusedIndex(-1)\n    }\n  }, [isOpen])\n\n  useFocusOnHide(menuRef, {\n    focusRef: buttonRef,\n    visible: isOpen,\n    shouldFocus: true,\n  })\n\n  /**\n   * Generate unique ids for menu's list and button\n   */\n  const [buttonId, menuId] = useIds(id, `menu-button`, `menu-list`)\n\n  const openAndFocusMenu = React.useCallback(() => {\n    onOpen()\n    focus(menuRef.current, {\n      nextTick: true,\n      selectTextIfInput: false,\n    })\n  }, [onOpen, menuRef])\n\n  const timeoutIds = React.useRef<Set<number>>(new Set([]))\n\n  useUnmountEffect(() => {\n    timeoutIds.current.forEach((id) => clearTimeout(id))\n    timeoutIds.current.clear()\n  })\n\n  const openAndFocusFirstItem = React.useCallback(() => {\n    onOpen()\n    const id = setTimeout(() => {\n      const first = descendants.firstEnabled()\n      if (first) setFocusedIndex(first.index)\n    })\n    timeoutIds.current.add(id)\n  }, [onOpen, setFocusedIndex, descendants])\n\n  const openAndFocusLastItem = React.useCallback(() => {\n    onOpen()\n    const id = setTimeout(() => {\n      const last = descendants.lastEnabled()\n      if (last) setFocusedIndex(last.index)\n    })\n    timeoutIds.current.add(id)\n  }, [onOpen, setFocusedIndex, descendants])\n\n  const refocus = React.useCallback(() => {\n    const doc = getOwnerDocument(menuRef.current)\n    const hasFocusWithin = menuRef.current?.contains(doc.activeElement)\n    const shouldRefocus = isOpen && !hasFocusWithin\n\n    if (!shouldRefocus) return\n\n    const node = descendants.item(focusedIndex)?.node\n    if (node) {\n      focus(node, { selectTextIfInput: false })\n    }\n  }, [isOpen, focusedIndex, descendants])\n\n  return {\n    openAndFocusMenu,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    onTransitionEnd: refocus,\n    descendants,\n    popper,\n    buttonId,\n    menuId,\n    forceUpdate: popper.forceUpdate,\n    orientation: \"vertical\",\n    isOpen,\n    onToggle,\n    onOpen,\n    onClose,\n    menuRef,\n    buttonRef,\n    focusedIndex,\n    closeOnSelect,\n    closeOnBlur,\n    autoSelect,\n    setFocusedIndex,\n    isLazy,\n    lazyBehavior,\n  }\n}\n\nexport interface UseMenuReturn extends ReturnType<typeof useMenu> {}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuButton hook\n * -----------------------------------------------------------------------------------------------*/\nexport interface UseMenuButtonProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\n/**\n * React Hook to manage a menu button.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\nexport function useMenuButton(\n  props: UseMenuButtonProps = {},\n  externalRef: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  const {\n    isOpen,\n    onClose,\n    autoSelect,\n    popper,\n    openAndFocusFirstItem,\n    openAndFocusLastItem,\n    openAndFocusMenu,\n  } = menu\n\n  const onClick = React.useCallback(() => {\n    if (isOpen) {\n      onClose()\n    } else {\n      const action = autoSelect ? openAndFocusFirstItem : openAndFocusMenu\n      action()\n    }\n  }, [autoSelect, isOpen, onClose, openAndFocusFirstItem, openAndFocusMenu])\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n      const keyMap: EventKeyMap = {\n        Enter: openAndFocusFirstItem,\n        ArrowDown: openAndFocusFirstItem,\n        ArrowUp: openAndFocusLastItem,\n      }\n\n      const action = keyMap[eventKey]\n\n      if (action) {\n        event.preventDefault()\n        event.stopPropagation()\n        action(event)\n      }\n    },\n    [openAndFocusFirstItem, openAndFocusLastItem],\n  )\n\n  return {\n    ...props,\n    ref: mergeRefs(menu.buttonRef, externalRef, popper.referenceRef),\n    id: menu.buttonId,\n    \"data-active\": dataAttr(menu.isOpen),\n    \"aria-expanded\": menu.isOpen,\n    \"aria-haspopup\": \"menu\" as React.AriaAttributes[\"aria-haspopup\"],\n    \"aria-controls\": menu.menuId,\n    onClick: callAllHandlers(props.onClick, onClick),\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\nfunction isTargetMenuItem(event: Pick<MouseEvent, \"target\">) {\n  const target = event.target as HTMLElement\n  // this will catch `menuitem`, `menuitemradio`, `menuitemcheckbox`\n  return !!target.getAttribute(\"role\")?.startsWith(\"menuitem\")\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuList\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuListProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {}\n\n/**\n * React Hook to manage a menu list.\n *\n * The assumption here is that the `useMenu` hook is used\n * in a component higher up the tree, and its return value\n * is passed as `context` to this hook.\n */\nexport function useMenuList(\n  props: UseMenuListProps = {},\n  ref: React.Ref<any> = null,\n) {\n  const menu = useMenuContext()\n\n  if (!menu) {\n    throw new Error(\n      `useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>`,\n    )\n  }\n\n  const {\n    focusedIndex,\n    setFocusedIndex,\n    menuRef,\n    isOpen,\n    onClose,\n    menuId,\n    isLazy,\n    lazyBehavior,\n  } = menu\n\n  const descendants = useMenuDescendantsContext()\n\n  /**\n   * Hook that creates a keydown event handler that listens\n   * to printable keyboard character press\n   */\n  const createTypeaheadHandler = useShortcut({\n    preventDefault: (event) => event.key !== \" \" && isTargetMenuItem(event),\n  })\n\n  const onKeyDown = React.useCallback(\n    (event: React.KeyboardEvent) => {\n      const eventKey = normalizeEventKey(event)\n\n      const keyMap: EventKeyMap = {\n        Tab: (event) => event.preventDefault(),\n        Escape: onClose,\n        ArrowDown: () => {\n          const next = descendants.nextEnabled(focusedIndex)\n          if (next) setFocusedIndex(next.index)\n        },\n        ArrowUp: () => {\n          const prev = descendants.prevEnabled(focusedIndex)\n          if (prev) setFocusedIndex(prev.index)\n        },\n      }\n\n      const fn = keyMap[eventKey]\n\n      if (fn) {\n        event.preventDefault()\n        fn(event)\n        return\n      }\n\n      /**\n       * Typeahead: Based on current character pressed,\n       * find the next item to be selected\n       */\n      const onTypeahead = createTypeaheadHandler((character) => {\n        const nextItem = getNextItemFromSearch(\n          descendants.values(),\n          character,\n          (item) => item?.node?.textContent ?? \"\",\n          descendants.item(focusedIndex),\n        )\n        if (nextItem) {\n          const index = descendants.indexOf(nextItem.node)\n          setFocusedIndex(index)\n        }\n      })\n\n      if (isTargetMenuItem(event)) {\n        onTypeahead(event)\n      }\n    },\n    [\n      descendants,\n      focusedIndex,\n      createTypeaheadHandler,\n      onClose,\n      setFocusedIndex,\n    ],\n  )\n\n  const hasBeenOpened = React.useRef(false)\n  if (isOpen) {\n    hasBeenOpened.current = true\n  }\n\n  const shouldRenderChildren = determineLazyBehavior({\n    hasBeenSelected: hasBeenOpened.current,\n    isLazy,\n    lazyBehavior,\n    isSelected: isOpen,\n  })\n\n  return {\n    ...props,\n    ref: mergeRefs(menuRef, ref),\n    children: shouldRenderChildren ? props.children : null,\n    tabIndex: -1,\n    role: \"menu\",\n    id: menuId,\n    style: {\n      ...props.style,\n      transformOrigin: \"var(--popper-transform-origin)\",\n    },\n    \"aria-orientation\": \"vertical\" as React.AriaAttributes[\"aria-orientation\"],\n    onKeyDown: callAllHandlers(props.onKeyDown, onKeyDown),\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuPosition: Composes usePopper to position the menu\n * -----------------------------------------------------------------------------------------------*/\n\nexport function useMenuPositioner(props: any = {}) {\n  const { popper, isOpen } = useMenuContext()\n  return popper.getPopperProps({\n    ...props,\n    style: {\n      visibility: isOpen ? \"visible\" : \"hidden\",\n      ...props.style,\n    },\n  })\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuItem: Hook for each menu item within the menu list.\n   We also use it in `useMenuItemOption`\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuItemProps\n  extends Omit<React.HTMLAttributes<Element>, \"color\"> {\n  /**\n   * If `true`, the menuitem will be disabled\n   */\n  isDisabled?: boolean\n  /**\n   * If `true` and the menuitem is disabled, it'll\n   * remain keyboard-focusable\n   */\n  isFocusable?: boolean\n  /**\n   * Overrides the parent menu's `closeOnSelect` prop.\n   */\n  closeOnSelect?: boolean\n}\n\nexport function useMenuItem(\n  props: UseMenuItemProps = {},\n  externalRef: React.Ref<any> = null,\n) {\n  const {\n    onMouseEnter: onMouseEnterProp,\n    onMouseMove: onMouseMoveProp,\n    onMouseLeave: onMouseLeaveProp,\n    onClick: onClickProp,\n    isDisabled,\n    isFocusable,\n    closeOnSelect,\n    ...htmlProps\n  } = props\n\n  const menu = useMenuContext()\n\n  const {\n    setFocusedIndex,\n    focusedIndex,\n    closeOnSelect: menuCloseOnSelect,\n    onClose,\n    menuRef,\n    isOpen,\n    menuId,\n  } = menu\n\n  const ref = React.useRef<HTMLDivElement>(null)\n  const id = `${menuId}-menuitem-${useId()}`\n\n  /**\n   * Register the menuitem's node into the domContext\n   */\n  const { index, register } = useMenuDescendant({\n    disabled: isDisabled && !isFocusable,\n  })\n\n  const onMouseEnter = React.useCallback(\n    (event) => {\n      onMouseEnterProp?.(event)\n      if (isDisabled) return\n      setFocusedIndex(index)\n    },\n    [setFocusedIndex, index, isDisabled, onMouseEnterProp],\n  )\n\n  const onMouseMove = React.useCallback(\n    (event) => {\n      onMouseMoveProp?.(event)\n      if (ref.current && !isActiveElement(ref.current)) {\n        onMouseEnter(event)\n      }\n    },\n    [onMouseEnter, onMouseMoveProp],\n  )\n\n  const onMouseLeave = React.useCallback(\n    (event) => {\n      onMouseLeaveProp?.(event)\n      if (isDisabled) return\n      setFocusedIndex(-1)\n    },\n    [setFocusedIndex, isDisabled, onMouseLeaveProp],\n  )\n\n  const onClick = React.useCallback(\n    (event: React.MouseEvent) => {\n      onClickProp?.(event)\n      if (!isTargetMenuItem(event)) return\n      /**\n       * Close menu and parent menus, allowing the MenuItem\n       * to override its parent menu's `closeOnSelect` prop.\n       */\n      if (closeOnSelect ?? menuCloseOnSelect) {\n        onClose()\n      }\n    },\n    [onClose, onClickProp, menuCloseOnSelect, closeOnSelect],\n  )\n\n  const isFocused = index === focusedIndex\n\n  const trulyDisabled = isDisabled && !isFocusable\n\n  useUpdateEffect(() => {\n    if (!isOpen) return\n    if (isFocused && !trulyDisabled && ref.current) {\n      focus(ref.current, { nextTick: true, selectTextIfInput: false })\n    } else if (menuRef.current && !isActiveElement(menuRef.current)) {\n      focus(menuRef.current)\n    }\n  }, [isFocused, trulyDisabled, menuRef, isOpen])\n\n  const clickableProps = useClickable({\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    ref: mergeRefs(register, ref, externalRef),\n    isDisabled,\n    isFocusable,\n  })\n\n  return {\n    ...htmlProps,\n    ...clickableProps,\n    id,\n    role: \"menuitem\",\n    tabIndex: isFocused ? 0 : -1,\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuOption: Composes useMenuItem to provide a selectable/checkable menu item\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuOptionOptions {\n  value?: string\n  isChecked?: boolean\n  type?: \"radio\" | \"checkbox\"\n  children?: React.ReactNode\n}\n\nexport interface UseMenuOptionProps\n  extends UseMenuItemProps,\n    UseMenuOptionOptions {}\n\nexport function useMenuOption(\n  props: UseMenuOptionProps = {},\n  ref: React.Ref<any> = null,\n) {\n  const { type = \"radio\", isChecked, ...rest } = props\n  const ownProps = useMenuItem(rest, ref)\n  return {\n    ...ownProps,\n    role: `menuitem${type}`,\n    \"aria-checked\": isChecked as React.AriaAttributes[\"aria-checked\"],\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n * useMenuOptionGroup: Manages the state of multiple selectable menuitem or menu option\n * -----------------------------------------------------------------------------------------------*/\n\nexport interface UseMenuOptionGroupProps {\n  value?: string | string[]\n  defaultValue?: string | string[]\n  type?: \"radio\" | \"checkbox\"\n  onChange?: (value: string | string[]) => void\n  children?: React.ReactNode\n}\n\nexport function useMenuOptionGroup(props: UseMenuOptionGroupProps = {}) {\n  const {\n    children,\n    type = \"radio\",\n    value: valueProp,\n    defaultValue,\n    onChange: onChangeProp,\n    ...htmlProps\n  } = props\n\n  const isRadio = type === \"radio\"\n\n  const fallback = isRadio ? \"\" : []\n\n  const [value, setValue] = useControllableState({\n    defaultValue: defaultValue ?? fallback,\n    value: valueProp,\n    onChange: onChangeProp,\n  })\n\n  const onChange = React.useCallback(\n    (selectedValue: string) => {\n      if (type === \"radio\" && isString(value)) {\n        setValue(selectedValue)\n      }\n\n      if (type === \"checkbox\" && isArray(value)) {\n        const nextValue = value.includes(selectedValue)\n          ? removeItem(value, selectedValue)\n          : addItem(value, selectedValue)\n\n        setValue(nextValue)\n      }\n    },\n    [value, setValue, type],\n  )\n\n  const validChildren = getValidChildren(children)\n\n  const clones = validChildren.map((child) => {\n    /**\n     * We've added an internal `id` to each `MenuItemOption`,\n     * let's use that for type-checking.\n     *\n     * We can't rely on displayName or the element's type since\n     * they can be changed by the user.\n     */\n    if ((child.type as any).id !== \"MenuItemOption\") return child\n\n    const onClick = (event: MouseEvent) => {\n      onChange(child.props.value)\n      child.props.onClick?.(event)\n    }\n\n    const isChecked =\n      type === \"radio\"\n        ? child.props.value === value\n        : value.includes(child.props.value)\n\n    return React.cloneElement(child, {\n      type,\n      onClick,\n      isChecked,\n    })\n  })\n\n  return {\n    ...htmlProps,\n    children: clones,\n  }\n}\n\nexport function useMenuState() {\n  const { isOpen, onClose } = useMenuContext()\n  return { isOpen, onClose }\n}\n"],"file":"use-menu.js"}