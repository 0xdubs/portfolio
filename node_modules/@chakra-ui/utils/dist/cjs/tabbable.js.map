{"version":3,"sources":["../../src/tabbable.ts"],"names":["hasDisplayNone","element","window","getComputedStyle","display","hasTabIndex","hasAttribute","hasNegativeTabIndex","tabIndex","isDisabled","Boolean","getAttribute","isInputElement","isHTMLElement","tagName","toLowerCase","isActiveElement","doc","HTMLElement","document","activeElement","hasFocusWithin","contains","isHidden","parentElement","hidden","isContentEditable","value","isFocusable","localName","focusableTags","indexOf","others","a","audio","video","isTabbable"],"mappings":"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","sourcesContent":["// Really great work done by Diego Haz on this one\n// https://github.com/reakit/reakit/blob/master/packages/reakit-utils/src/tabbable.ts\n\nimport { getOwnerDocument } from \"./dom\"\n\nexport const hasDisplayNone = (element: HTMLElement) =>\n  window.getComputedStyle(element).display === \"none\"\n\nexport const hasTabIndex = (element: HTMLElement) =>\n  element.hasAttribute(\"tabindex\")\n\nexport const hasNegativeTabIndex = (element: HTMLElement) =>\n  hasTabIndex(element) && element.tabIndex === -1\n\nexport function isDisabled(element: HTMLElement) {\n  return (\n    Boolean(element.getAttribute(\"disabled\")) === true ||\n    Boolean(element.getAttribute(\"aria-disabled\")) === true\n  )\n}\n\nexport interface FocusableElement {\n  focus(options?: FocusOptions): void\n}\n\nexport function isInputElement(\n  element: FocusableElement,\n): element is HTMLInputElement {\n  return (\n    isHTMLElement(element) &&\n    element.tagName.toLowerCase() === \"input\" &&\n    \"select\" in element\n  )\n}\n\nexport function isActiveElement(element: FocusableElement) {\n  const doc =\n    element instanceof HTMLElement ? getOwnerDocument(element) : document\n  return doc.activeElement === (element as HTMLElement)\n}\n\nexport function hasFocusWithin(element: HTMLElement) {\n  if (!document.activeElement) return false\n  return element.contains(document.activeElement)\n}\n\nexport function isHTMLElement(element: any): element is HTMLElement {\n  return element instanceof HTMLElement\n}\n\nexport function isHidden(element: HTMLElement) {\n  if (element.parentElement && isHidden(element.parentElement)) return true\n  return element.hidden\n}\n\nexport function isContentEditable(element: HTMLElement) {\n  const value = element.getAttribute(\"contenteditable\")\n  return value !== \"false\" && value != null\n}\n\nexport function isFocusable(element: HTMLElement) {\n  if (!isHTMLElement(element) || isHidden(element) || isDisabled(element)) {\n    return false\n  }\n\n  const { localName } = element\n  const focusableTags = [\"input\", \"select\", \"textarea\", \"button\"]\n  if (focusableTags.indexOf(localName) >= 0) return true\n\n  const others = {\n    a: () => element.hasAttribute(\"href\"),\n    audio: () => element.hasAttribute(\"controls\"),\n    video: () => element.hasAttribute(\"controls\"),\n  }\n\n  if (localName in others) {\n    return others[localName as keyof typeof others]()\n  }\n\n  if (isContentEditable(element)) return true\n\n  return hasTabIndex(element)\n}\n\nexport function isTabbable(element?: HTMLElement | null) {\n  if (!element) return false\n  return (\n    isHTMLElement(element) &&\n    isFocusable(element) &&\n    !hasNegativeTabIndex(element)\n  )\n}\n"],"file":"tabbable.js"}